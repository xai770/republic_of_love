# Week Summary: 2026-02-15 â†’ 2026-02-20

*Compiled end-of-day Friday 20 Feb 2026*

---

## What a week.

Six sessions across six days. This wasn't polish â€” it was foundation-laying. A rough count of
the commits this week lands somewhere above 80. Here's what we built.

---

## The numbers grew up

| Metric | Mon 17 Feb | Fri 20 Feb | Î” |
|--------|-----------|-----------|---|
| Total postings | 258,430 | 301,732 | +43,302 (+17%) |
| Active postings | 248,648 | 196,868 | â€” |
| Embeddings | 268,232 | 316,549 | +48,317 |
| With summary | ~4,700 | 7,641 | +2,941 |
| Pipeline runtime | 19+ hours (Mon catchup) | 220 min | **âˆ’5x** |
| Berufenet rate | 0.4 titles/sec | 2.9 titles/sec | **7.3x faster** |
| Embedding rate | 6.4/sec (1 worker) | 32/sec (8 workers) | **5x faster** |
| Test suite | 404 tests passing | 437 tests passing | +33 |

---

## Saturday 15 Feb â€” The "What Stinks?" Day

One of those sessions where you ask the hard question and then answer it. Six commits in the
morning to fix a pipeline lockup (orphaned berufenet process holding DB lock). Then in the
afternoon: an honest 8-point audit of the codebase and complete same-day implementation.

**Built from scratch:**
- `core/base_actor.py` (~600 lines) â€” BaseActor, ProcessingActor, SourceActor. Every future
  actor inherits from this. Connection lifecycle, SIGTERM handling, progress logging,
  LLM helpers, batch upsert â€” all baked in.
- Replaced 4,000-query row-by-row upsert with `INSERT ... ON CONFLICT ... DO UPDATE` in batches of 500.
- Set `idle_in_transaction_session_timeout = '5min'` at DB level â€” no future orphan can
  hold locks indefinitely.
- 24 pipeline tests across 8 test classes â€” all passing.
- 85 stale files deleted from `tools/`.

The refactor proof-of-concept: extracted_summary_U.py went from 431 â†’ 310 lines with
no loss of function.

---

## Sunday 16 Feb â€” Infrastructure Night + UX Sprint

Overnight pipeline fix for a cursor-already-closed bug (1,254 silent failures). Then a
morning of infrastructure that should have existed from day one:

- **Pipeline logging fixed** â€” interactive mode uses `tee`, cron mode writes to file, both correct.
- **BI dashboard wired up** â€” changed `/bi` from broken iframe to 302 redirect;
  created `start_bi.sh` + `@reboot` cron entry.
- **Messages page sidebar removed** â€” chat-list is its own nav; duplicate sidebar was wasted space.
  Added WhatsApp-style system event inline messages (logon/logoff as green/red dot notices).
- **Search safety** â€” postings were showing to users with zero filtering (disabled + invalidated
  included). Added Google-style lazy verification: 5 postings per search, checked on-demand,
  24h TTL. Added `enabled=true AND invalidated=false` filter.
- **Unique partial index** added to prevent active-active duplicate external_ids.
- **89 new API tests** â€” total 404 passing. Auth flow, messages, feedback, search, profile.
- Domain filter fix, alpha-sort, map stats, zen feedback button (#20, #22, #23, #25 closed).

---

## Monday 17 Feb â€” Performance Day

The pipeline was slow. We made it fast.

**Embedding parallelism (5x):** GPU sat at 25% utilisation during embeddings. Sequential
`requests.post()` one at a time. Added `ThreadPoolExecutor(8 workers)`. GPU â†’ 95%.
6.4/sec â†’ 32/sec. Configurable via `EMBED_WORKERS` env var.

**Berufenet parallelism (7.3x):** Found the real bottleneck â€” every LLM call in berufenet
matching spawned a fresh OS subprocess (`ollama run`). Fork+exec+load overhead on every title.
Replaced with `requests.post('/api/generate')`. Added 2 concurrent workers.
0.4/sec â†’ 2.9/sec. 500 titles: ~3 min instead of ~20 min.

**85 files deleted** from `tools/` â€” cross-referenced every file against the entire codebase,
kept only 5 actually used.

**Anonymity infrastructure + Adele:** Built yogi name generation (LLM keywordâ†’name pipeline),
the Adele interview actor, profile extraction from CV upload, privacy copy on onboarding.
The "yogi" identity concept landed this day.

---

## Tuesday 18 Feb â€” The Everything Day

The longest session of the week. Started at 05:15, ran to 21:05.

**Pipeline fixes:**
- Logging bug: cron ran without TTY, output went nowhere. Fixed by always writing to LOGFILE,
  piping through `tee` only in interactive mode.
- Playwright lazy import â€” health check was crashing on import because playwright was in user
  site-packages, not venv. Fixed with TYPE_CHECKING guard.

**Role-based navbar:** Admin tools (Landscape, Market, Finances, Arcade) hidden from regular
users via `{% if user and user.is_admin %}`. `user.is_admin` was already in context, never used.

**Onboarding reset endpoint** (`POST /api/account/reset-onboarding`) â€” admin-only, cleans
all user data in correct FK order. Essential for testing the full funnel repeatedly.

**Clara (match generator) root fix:** Traced match count bug through 4 layers before finding
the real cause â€” the profile page wasn't passing `created_at` to the match query, so Clara was
comparing profiles to each other with stale data. Test: 5 profiles, 0 spurious matches. Fixed.

**Adele + CV extraction:** Full CV upload pipeline, LLM profile extraction, structured output
to `profile_work_history`. The first version of "CV â†’ profile" landed this day.

ROADMAP.md got a major rewrite. Mysti Test milestone defined (the first end-to-end user journey).

---

## Wednesday 19 Feb â€” Morning Review + Berufenet Hardening

Pipeline had run clean for 4 consecutive nights. 13,214 embeddings pending and growing.

**Root cause found:** Embedding actor (priority 30) ran *before* description backfill (priority 0).
New descriptions never got embeddings until the next night. Priority swap â†’ 13,214 â†’ 2 pending.
One SQL update, zero code changes.

**Description failure analysis:** 1,167 failures â†’ 94% transient (403 rate limits + timeouts),
6% legitimate removals. No action needed. Retry stage recovers ~37%.

**Berufenet parallelism v2:** Phase 2 was still 160 of the 211 minutes. Three levers:
LLM_WORKERS 2â†’4, batch size 500â†’2000, batch OWL lookup (single SQL `ANY(%s)` instead of N
individual queries). Combined: 211â†’~100 min target.

**Profile page rebuilt (Adele confirm flow):** Tabbed layout, work history timeline with
tech badges, CV upload widget, yogi name inline edit, bilingual CV error messages.
The profile page went from a placeholder to something real.

**LLM-powered yogi name chips + privacy polish:** Keywordâ†’Ollama name suggestion on onboarding,
user selects from chips, privacy copy explains the yogi concept, back buttons on steps 4+5.

---

## Thursdayâ€“Friday 20 Feb â€” UX Polish Day

The pipeline was stable. Product UI day.

**Morning:** Closed 5 feedback items (#166, #167, #171, #186, #244).
- Profile auto-focus yogi name if not set (DOMContentLoaded switch-to-form-tab + focus).
- Mira match count: traced through 8 commits. ALL the DB guards were correct. The LLM was
  *hallucinating* matches that weren't in the context. Fix: `VERBOTEN: Matches erwÃ¤hnen`
  negative constraint in the system prompt when `match_count = 0`.

**Afternoon (12 CSS iterations, version hâ†’s):**

| Tweak | Result |
|-------|--------|
| Frosted glass navbar + sidebar | Light 0.075/0.037 opacity, blur 2â€“3px â€” "hardly there" |
| Dark mode stale !important block | Removed â€” was overriding all subsequent fixes |
| Bold nav labels | `font-weight: 600` |
| Active page indicator | 5x stronger indigo fill + bar + glow |
| Active fill + shadow | `rgba(90,103,216,0.35)` + `box-shadow` underlay |
| CSS arrive animation | `navBarArrive` (scaleY from bottom) + `navActiveIn` (translateX slide-in) |
| Sidebar collapse speed | 0.2s â†’ 0.35s â†’ 1s â†’ 0.5s (user live-tuned) |
| Sidebar pin on navigate | sessionStorage â€” sidebar stays open across page loads |
| Messages active indicator | Was missing `{% set active_page = 'messages' %}` â€” added |
| Arcade sidebar | Dark page needs dark sidebar â€” `dark-bg-page` CSS override |

---

## Architecture clarity that emerged this week

The week wasn't just commits. Several conceptual clarifications happened that will shape
the next month of work:

**"My Matches is a pipeline tracker, not a feed."** Postings enter it through yogi actions
on the search page (viewed â†’ interested â†’ apply/no-go). Clara generates the cover letter
and no-go rationale. This reframing changed how we think about the whole UX.

**Multi-row search.** Each row is an independent query. Rows OR together. Profile similarity
is just another row â€” fires automatically if `has_skills = true`. Source tags on result cards
show which row found each job. No LLM, no extra cost.

**Profile is a living document.** Work history + click behaviour + saved searches + Mira
conversations + no-go rationales. Never "done". Adele decides when there's enough signal.

**Profile vs Settings separation.** Profile = who you are and what you want. Settings = how
you use the app. Currently mixed. Should be separated.

---

## What's next

| Priority | Item |
|----------|------|
| ðŸ”´ | CV upload â†’ Adele confirm flow (upload â†’ extract â†’ yogi approves â†’ saves to profile) |
| ðŸ”´ | Match review UI (browse Clara's matches, see job details, rate 1â€“10) |
| ðŸ”´ | Apply/save action (bookmark postings, "apply" link to external URL) |
| ðŸŸ¡ | Multi-row search builder (profile row auto-activation) |
| ðŸŸ¡ | Profile page redesign (after multi-row search design settles) |
| ðŸŸ¡ | Rating widget design (sliders + smiley, feeds back to profile) |
| ðŸŸ¢ | Push to origin/master (~45 unpushed commits) |
| ðŸŸ¢ | Systemd units (currently on @reboot cron) |

---

*That's the week. 6 days, ~80 commits, a pipeline 5â€“7x faster than Monday,
a UI that went from functional to polished, and an architecture that knows
what it is. Not bad.*
