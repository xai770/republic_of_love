---
id: P0.8
title: "Contact Data & Consent"
phase: 0
status: proposed
owner: sandy
priority: high
effort: 3-4h
depends_on: P0.7
---

# P0.8 Contact Data & Consent

> **Context:** P0.7 established "we don't store what we don't need." But Mira's "I'll ask and send you a message" promise requires a way to reach yogis. This doc specifies how to store contact data legally and minimally.

## Goal

Enable talent.yoga to reach yogis when they're not on the site, while maintaining privacy-first principles.

## Status: ðŸ“‹ PROPOSED

---

## The Problem

P0.7 (Privacy Architecture) says we don't store email. But:

1. **Mira's promise:** "I'll ask and send you a message" â€” requires a way to deliver that message
2. **Dream job alerts:** "Tell me when my dream job appears" â€” requires notification channel
3. **Journey updates:** "Your application was viewed" â€” requires push capability

Without contact storage, yogis only see updates when they visit. That's a significant UX gap.

---

## The Solution: Opt-In Contact Storage

Store contact data **only with explicit consent**, for **specific purposes**, with **easy revocation**.

### What Changes from P0.7

| P0.7 (Current) | P0.8 (Addition) |
|----------------|-----------------|
| No email stored | Email stored **if consented** |
| Google OAuth token only | OAuth token + optional notification_email |
| Can't reach yogis offline | Can reach via email or push |

**P0.7 remains the default.** Contact storage is opt-in, not opt-out.

---

## GDPR Compliance

### Lawful Basis: Consent

We use **explicit consent** (GDPR Art. 6(1)(a)), not legitimate interest or contract necessity.

**Why consent over contract:**
- Cleaner legally â€” no ambiguity
- Aligns with our ethos ("we don't store what we don't need")
- Easy to withdraw
- User understands exactly what they're agreeing to

### Consent Requirements (GDPR Art. 7)

| Requirement | How We Meet It |
|-------------|----------------|
| **Freely given** | Service works without consent; notifications are optional |
| **Specific** | Consent is for notifications, not "marketing" |
| **Informed** | Clear explanation of what we store and why |
| **Unambiguous** | Checkbox, not pre-ticked; explicit action required |
| **Withdrawable** | One-click revoke in settings |

---

## Schema Changes

```sql
-- Add to users table
ALTER TABLE users ADD COLUMN notification_email TEXT;
ALTER TABLE users ADD COLUMN notification_consent_at TIMESTAMPTZ;
ALTER TABLE users ADD COLUMN notification_preferences JSONB DEFAULT '{}';

-- notification_preferences structure:
-- {
--   "job_alerts": true,           -- New matches
--   "mira_responses": true,       -- Answers to "I'll ask"
--   "journey_updates": false,     -- Application status changes
--   "frequency": "daily"          -- "immediate", "daily", "weekly"
-- }

-- Index for finding users to notify
CREATE INDEX idx_users_notification_email 
ON users(notification_email) 
WHERE notification_email IS NOT NULL;
```

### Data Lifecycle

| Event | Action |
|-------|--------|
| Consent given | Store email + timestamp |
| Consent withdrawn | Set both to NULL |
| Account deleted | Delete entire row |
| Email bounces 3x | Auto-revoke consent, notify on next visit |

---

## User Experience

### Consent Request (Mira's Voice)

When Mira encounters something she needs to follow up on:

```
Gute Frage! Das weiÃŸ ich gerade nicht sicher.

Ich frage nach und schicke dir eine Nachricht, 
sobald ich mehr weiÃŸ.

DafÃ¼r brÃ¤uchte ich eine E-Mail-Adresse von dir.
Du kannst das jederzeit in den Einstellungen Ã¤ndern.

[E-Mail eingeben: _______________]
[Nicht jetzt]
```

**English:**
```
Good question! I'm not sure about that right now.

I'll ask the team and send you a message 
as soon as I know more.

For that, I'd need an email address from you.
You can change this anytime in settings.

[Enter email: _______________]
[Not now]
```

### Settings Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Benachrichtigungen                                                 â”‚
â”‚                                                                     â”‚
â”‚  E-Mail: max@example.com                    [Ã„ndern] [LÃ¶schen]      â”‚
â”‚  Eingewilligt am: 2026-02-02                                        â”‚
â”‚                                                                     â”‚
â”‚  Was mÃ¶chtest du erhalten?                                          â”‚
â”‚  â˜‘ Neue passende Stellen                                            â”‚
â”‚  â˜‘ Antworten von Mira                                               â”‚
â”‚  â˜ Updates zu meinen Bewerbungen                                    â”‚
â”‚                                                                     â”‚
â”‚  Wie oft?                                                           â”‚
â”‚  â—‹ Sofort  â— TÃ¤glich  â—‹ WÃ¶chentlich                                 â”‚
â”‚                                                                     â”‚
â”‚  [Alle Benachrichtigungen deaktivieren]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### "Not Now" Path

If yogi declines:
- Mira's question goes to the queue anyway
- Answer is stored, shown on next visit
- Mira can say: "Ãœbrigens, ich habe eine Antwort auf deine Frage von letztem Mal..."

No pressure, no dark patterns.

---

## The "I'll Ask" Queue

### Infrastructure Needed

```sql
CREATE TABLE mira_questions (
    question_id SERIAL PRIMARY KEY,
    user_id TEXT REFERENCES users(google_id),
    question TEXT NOT NULL,
    context JSONB,                    -- What was Mira discussing?
    asked_at TIMESTAMPTZ DEFAULT NOW(),
    answered_at TIMESTAMPTZ,
    answer TEXT,
    answered_by TEXT,                 -- 'system', 'human', 'escalated'
    notification_sent_at TIMESTAMPTZ
);
```

### Flow

```mermaid
flowchart TD
    A[Yogi asks question] --> B{Mira knows?}
    B -->|Yes| C[Answer directly]
    B -->|No| D[Log to mira_questions]
    D --> E{Has email consent?}
    E -->|Yes| F[Promise: "I'll email you"]
    E -->|No| G[Promise: "I'll have an answer next time"]
    
    D --> H[Question in queue]
    H --> I[Answer provided]
    I --> J{Has email?}
    J -->|Yes| K[Send email]
    J -->|No| L[Store for next visit]
```

### Who Answers?

| Question Type | Answered By |
|---------------|-------------|
| FAQ (how does X work?) | System â€” add to Mira's knowledge |
| Bug report | Human â€” escalate to support |
| Feature request | Human â€” log and acknowledge |
| Job-specific | System â€” if we can, else human |

**MVP:** Manual review of queue daily. Later: auto-categorization + routing.

---

## Privacy Policy Updates

Add section:

> **Kontaktdaten fÃ¼r Benachrichtigungen**
>
> Wenn du mÃ¶chtest, dass wir dich Ã¼ber neue passende Stellen oder Antworten 
> auf deine Fragen informieren, kannst du uns deine E-Mail-Adresse mitteilen.
>
> - Wir speichern diese nur mit deiner ausdrÃ¼cklichen Einwilligung
> - Du kannst die Einwilligung jederzeit in den Einstellungen widerrufen
> - Bei Widerruf lÃ¶schen wir deine E-Mail-Adresse sofort
> - Wir verwenden sie ausschlieÃŸlich fÃ¼r die von dir gewÃ¤hlten Benachrichtigungen
>
> Rechtsgrundlage: Art. 6 Abs. 1 lit. a DSGVO (Einwilligung)

---

## Implementation Tasks

| Task | Effort | Owner | Depends On |
|------|--------|-------|------------|
| 1. Schema changes | 30min | Arden | â€” |
| 2. Settings UI (notification prefs) | 2h | Arden | #1 |
| 3. Consent capture in Mira flow | 1h | Arden | #1, Mira Phase 1 |
| 4. mira_questions table + basic queue | 1h | Arden | #1 |
| 5. Email sending (basic) | 1h | Arden | #1 |
| 6. Privacy policy update | 30min | Sandy | â€” |

**Total: ~6h** (can overlap with Mira Phase 1)

---

## Integration with P0.7

This extends P0.7, doesn't replace it:

| Principle | P0.7 | P0.8 |
|-----------|------|------|
| Minimal data | âœ… No CV stored | âœ… Only email if consented |
| Privacy by design | âœ… DMZ model | âœ… Opt-in only |
| Easy erasure | âœ… Delete google_id | âœ… + Delete email |
| Transparency | âœ… Show facets | âœ… Show consent status |

---

## Risks

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Yogi forgets they consented | Low | Medium | Show consent date in settings |
| Email goes to spam | Medium | Medium | Use proper SPF/DKIM, warm up domain |
| Queue backlog grows | Medium | Low | Auto-close after 14 days with apology |
| GDPR complaint | Low | High | Document everything, respond within 30 days |

---

## Success Criteria

- [ ] Yogis can opt-in to notifications
- [ ] Consent is timestamped and auditable
- [ ] One-click revoke works
- [ ] "I'll ask" questions are logged and answered
- [ ] Email delivery works (test with real addresses)
- [ ] Privacy policy updated

---

## References

- [P0.7 Privacy Architecture](P0.7_privacy_architecture.md)
- [GDPR Art. 6 â€” Lawful Basis](https://gdpr-info.eu/art-6-gdpr/)
- [GDPR Art. 7 â€” Consent Conditions](https://gdpr-info.eu/art-7-gdpr/)
- Sis's research (2026-02-01) on GDPR-compliant contact storage

---

*This enables Mira's core promise without compromising our privacy-first stance.*

â€” Sandy  
2026-02-02
