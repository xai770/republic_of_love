---
id: P0.1
title: "Job Posting Ingestion"
phase: 0
status: completed
owner: arden
priority: critical
completed_date: 2025-12
effort: 20h
---

# P0.1 Job Posting Ingestion

## Goal

Ingest job postings from external sources into the turing database.

## Status: ✅ COMPLETED

## What We Built

### Deutsche Bank Interrogator

`interrogators/deutsche_bank.py` — Scrapes Deutsche Bank careers portal.

**Flow:**
```
DB careers portal → interrogator → postings table
                                    ├── job_description
                                    ├── title, company, location
                                    ├── external_url
                                    └── last_seen_at (heartbeat)
```

### Schema

```sql
postings (
    posting_id SERIAL PRIMARY KEY,
    source TEXT,                    -- 'deutsche_bank'
    external_id TEXT,               -- Source's job ID
    title TEXT,
    company TEXT,
    location TEXT,
    job_description TEXT,           -- Raw description
    job_description_en TEXT,        -- Translation if non-English
    external_url TEXT,
    status TEXT,                    -- 'active', 'closed', 'invalidated'
    last_seen_at TIMESTAMP,         -- Heartbeat for absence detection
    invalidated BOOLEAN,
    invalidated_at TIMESTAMP,
    invalidated_reason TEXT,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
)
```

### Absence Detection

Postings not seen in 7+ days are auto-invalidated via nightly cron:
```sql
UPDATE postings 
SET invalidated = TRUE, invalidated_reason = 'Not seen in 7+ days'
WHERE last_seen_at < NOW() - INTERVAL '7 days' AND invalidated = FALSE;
```

## Metrics

| Metric | Value |
|--------|-------|
| Source | Deutsche Bank |
| Active postings | ~200 |
| Total ingested | 2,000+ |
| Languages | English, German |

## Lessons Learned

1. **Heartbeat > HTTP checks** — Don't re-verify postings. Trust the interrogator's `last_seen_at`.
2. **Translation upstream** — Non-English postings get `job_description_en` populated by interrogator.
3. **Idempotent ingestion** — Re-running interrogator updates existing postings, doesn't duplicate.
